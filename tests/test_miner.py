from cveminer import miner

class TestMiner(object):

    class DummyArgs(object):
        def __init__(self, online, local = None):
            self.online = online
            self.local = local

    def test_mine_repo(self):
        args = self.DummyArgs('wrongInput', 'alsoWrongInput')

        assert miner.mine_repo(args) == dict()
        args.online = 'https://github.com/MBalazs8796/testing'
        # I assume that git log parser works correctly, so no in depth check is needed here
        assert len(miner.mine_repo(args)) == 7
        args.online = None
        assert miner.mine_repo(args) == dict()
        args.local = './repos/testing'
        assert len(miner.mine_repo(args)) == 7
